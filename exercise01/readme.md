# Self-Organizing Systems 2021/22 Exercise 1

Group Members:
- Jan Hadl (01609664)
- Luzia Corrpaci
- Markus

## Setup
The code for this exercise was tested with Python 3.9 and has some dependencies. You can install the dependencies with `pip` by executing `pip install -r requirements.txt` or, if you already have `pipenv` set up, by executing `pipenv install` (which will read the dependencies from `Pipfile`). In case you use regular `pip`, we recommend that you install the project dependencies into a virtualenv to not pollute your global package list and avoid version conflicts. 

Another dependency that is used by the `DNALA` algorithm for multiple sequence alignment is `clustalw2`. You can 
download the installer for your OS from `http://www.clustal.org/clustal2/`. Please take care that `clustalw2` is recognized as a command (i.e. is in your PATH on Windows), since our program references it when you use the `DNALA` algorithm and don't provide a pre-computed alignment file. 

## Usage
To execute the program, run `python -m src.main INFILE -a <algorithm> -al <alignment-file> -o <out-file>` in the root of the exercise folder.
The options are as follows:
- `INFILE`: The path to the `.fasta` file that contains the sequences to be anonymized; for example: `resources/melanocortin.fasta`.
- `-a <algorithm>`: The algorithm to run for alignment; options are `DNALA` (the original DNALA algorithm), `MWM` (formulates the problem as an MWM problem and uses a graph library to solve it), `GA` (uses a genetic algorithm  library to compute a solution), and `PWA_ONLY` (does not solve the problem at all, but rather pre-computes the pairwise alignments and distances required by `MWM` and `GA`).
- `-al <alignment-file>` (optional): the path to a file that contains pre-computed sequence alignments for the given `INFILE`; when `DNALA` is chosen as the algorithm, the alignment file needs to be a global alignments file generated by `clustalw2` in the `.aln`-format (so e.g. by running `clustalw2 -infile=resources/melanocortin.fasta -outorder=INPUT`). For `MWM` and `GA` the file needs to be a pairwise alignment file in `.pkl`-format, which you can generate by running the program with `PWA_ONLY` as algorithm (so e.g. by running `python -m src.main resources/melanocortin.fasta -a PWA_ONLY -o resources/melanocortin-pairwise.pkl`). When this option is not specified, the chosen algorithm will compute the alignments itself before running. This option is just for convenience, since with larger `.fasta` files the alignment can take quite some time.
- `-o <out-file>` (optional, except when the algorithm is `PWA_ONLY`): the path to the file to write results to; when the `-a` option is any other than `PWA_ONLY`, the result will be in JSON format and contain the 2-anonymized sequences, in addition to the total distance among all pairs of sequences that were matched.

So, to compute an anonymization of the `melanocortin.fasta` file with a genetic algorithm using the pre-computed pairwise alignments, run:
```
python -m src.main resources/melanocortin.fasta -a GA -al resources/melanocortin-pairwise.pkl
```

